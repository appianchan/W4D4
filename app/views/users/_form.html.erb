<%
    if type == :new
        header_text = "Create New User"
        action = users_url
        button_text = "Create you!"
    else
        header_text = "Edit This User"
        action = user_url(user)
        button_text = "Changem!"
    end
%>

<h1><%= header_text %></h1>

<form action="<%= action %>" method="post">
  <input type="hidden" name="authenticity_token" value="<%= form_authenticity_token %>">

    <%# overwrite the method %>
    <% if type == :edit %>
        <input type="hidden" name="_method" value="patch">
    <% end %>

    <br>
    <label >Email:
        <input type="email" name="user[email]" value="<%= user.email %>">
    </label>
    <br>

    <label for="user_password">Password</label>
    <input id="user_password" type="password" name="user[password]" value="<%= user.password %>">
    <br>

    <input type="submit" value="<%= button_text %>">
</form>